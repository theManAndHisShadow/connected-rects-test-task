(()=>{var e={838:function(e){var t;t=()=>(()=>{"use strict";var e={523:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emulateEvent=t.addMultipleEventHandlers=t.isObject=t.isArray=t.isLink=void 0,t.isLink=function(e){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e)},t.isArray=function(e){return null!==e&&"Array"===e.constructor.name},t.isObject=function(e){return null!==e&&"Object"===e.constructor.name},t.addMultipleEventHandlers=function(e,t,o){e.forEach((function(e){e.addEventListener(t,(function(e){o(e)}))}))},t.emulateEvent=function(e,t){var o=document.createEvent("Events");o.initEvent(t,!0,!1),e.dispatchEvent(o)}},298:function(e,t){var o=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};function n(e){var t="\n/* generated by src/ts/lib/themes.ts generateCSSCode() function */\n    ";return Object.keys(e).forEach((function(n){var r=e[n].selector,i=o([],Object.keys(e[n].properties),!0).map((function(t){return"".concat(t,": ").concat(e[n].properties[t],";\n")})).join("");t+="\n".concat(r," {\n    ").concat(i,"}\n")})),t}function r(e,t){var o=document.head.querySelector(t);if(o)o.innerHTML=e;else{var n=document.createElement("style"),r=t.split("=")[0].replace(/\[+/gm,""),i=t.split("=")[1].replace(/(\]|\")+/gm,"");n.type="text/css",n.setAttribute(r,i),n.innerHTML=e,document.head.appendChild(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTheme=t.updateThemeCSS=t.generateCSSCode=void 0,t.generateCSSCode=n,t.updateThemeCSS=r,t.updateTheme=function(e){if(/css\/themes\/[a-zA-Z\-0-9]+\.css/.test(e)){var t=e,o=document.createElement("link");o.href=t,o.rel="stylesheet",document.head.appendChild(o)}else{var i=function(e){return{andromeda:{container:{selector:".json2html-container",properties:{background:"#23262E"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#9c967a"}},key:{selector:".json2html-key",properties:{color:"#00e8c6"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#ee5d43"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#ee5d43"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#f39c12"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#96E072"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#3B79C7"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#4e4f54"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#f92672"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#646b7c"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#8490a8"}}},daylight:{container:{selector:".json2html-container",properties:{background:"white"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"blue"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"blueviolet"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#b44343"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#1e7fcc"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#4caf50"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#4caf50"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#9b9b9b"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#795548"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#646b7c"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#000000"}}},dracula:{container:{selector:".json2html-container",properties:{background:"#282a36"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#ffffff"}},key:{selector:".json2html-key",properties:{color:"#8be9fd"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#bd93f9"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#ff79c6"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#bd93f9"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#f1fa8c"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#ff79c6"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#6272a4"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#ffb86c"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#f8f8f2"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"white"}}},"github-dark":{container:{selector:".json2html-container",properties:{background:"#0d1117"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#afafaf"}},key:{selector:".json2html-key",properties:{color:"#c9d1d9"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#b392f0"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#ff79c6"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#9ecbff"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#9ecbff"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#9ecbff"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#6a737d"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#9ecbff"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#9ecbff"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#6a737d"}}},"github-light":{container:{selector:".json2html-container",properties:{background:"#ffffff"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#afafaf"}},key:{selector:".json2html-key",properties:{color:"#25292f"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#6f42c1"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#25292f"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#005cc5"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#0a3069"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#0a3069"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#6a737d"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#005cc5"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#005cc5"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#6a737d"}}},"gruvbox-dark":{container:{selector:".json2html-container",properties:{background:"#282828"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"#98971A"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#B16286"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#8ec07c"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#B16286"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#458588"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#689D6A"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#504945"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#CC241D"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#A89984"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#6a737d"}}},"gruvbox-light":{container:{selector:".json2html-container",properties:{background:"#FBF1C7"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#9c967a"}},key:{selector:".json2html-key",properties:{color:"#98971A"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#B16286"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#CC241D"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#B16286"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#458588"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#689D6A"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#BDAE93"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#CC241D"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#7C6F64"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#7C6F64"}}},horizon:{container:{selector:".json2html-container",properties:{background:"#fffbf7"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"#da103f"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#8a31b9"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#b44343"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#1766a5"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#f6661e"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#c14e15"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#9b9b9b"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#3f51b5"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#846e64"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#black"}}},monokai:{container:{selector:".json2html-container",properties:{background:"#272822"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"#F92672"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#AE81FF"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#f92672"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#AE81FF"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#E6DB74"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#F8F8F2"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#75715E"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#FD971F"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#66D9EF"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"white"}}}}[e]}(e);r(n(i),'[data-style-origin="json2html"]')}}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.json2html=void 0;var t=o(523),r=o(298);function i(e,t){t=t||e.parentElement.querySelector(".".concat("json2html-collapse-all-toggle"));var o="uncollapsed"==e.className.split("--")[1]?"collapse":"uncollapse";t&&(t.textContent="(".concat(o," all)"))}function s(e){var o=Object.keys(e.parsedJSON),n=[],r=document.createElement("div");return r.classList.add("json2html-container"),o.forEach((function(o){if((0,t.isArray)(e.parsedJSON[o])||(0,t.isObject)(e.parsedJSON[o])){var r=function(e){var o=e.depth+1,n=Object.values(e.itemValue),r=n.length>e.groupBigArrayItemsBy,l=r?function(e,t){for(var o=0,n={},r=function(r){var i=r*t>e.length?e.length:r*t,s="[".concat(o," ... ").concat(i-1,"]"),l=e.slice(o,i),a=[];l.forEach((function(e,t){a[t+o]=e})),o!==i&&(n[s]=a),o=r*t},i=0;i<=Math.ceil(e.length/t);i++)r(i);return n}(n,e.groupBigArrayItemsBy):e.itemValue,a=Object.values(l).length,c=s({depth:o,parsedJSON:l,renderNestedLength:e.renderNestedLength,highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,collapseAll:e.collapseAll,showLevel:e.showLevel,showTypeOnHover:e.showTypeOnHover,groupBigArrayItemsBy:e.groupBigArrayItemsBy,isGroupItem:r});c.classList.add("json2html-nested-value");var p=document.createElement("div");p.classList.add("json2html-complex-pair"),p.setAttribute("data-tree-level","".concat(o));var h=document.createElement("span");h.textContent="▶",!0===e.collapseAll?(h.classList.add("json2html-spoiler-toggle--collapsed"),c.setAttribute("hidden","")):o<=e.showLevel?h.classList.add("json2html-spoiler-toggle--uncollapsed"):(h.classList.add("json2html-spoiler-toggle--collapsed"),c.setAttribute("hidden",""));var u=document.createElement("span");u.textContent=e.keyName+": ",u.classList.add("json2html-key");var d=document.createElement("span");d.textContent=e.itemValue.constructor.name,a>0&&(0,t.addMultipleEventHandlers)([h,u,d],"click",(function(e){var t="json2html-spoiler-toggle--collapsed",o="json2html-spoiler-toggle--uncollapsed";h.classList.contains(t)?(h.classList.remove(t),h.classList.add(o),c.removeAttribute("hidden")):(h.classList.add(t),h.classList.remove(o),c.setAttribute("hidden","")),i(h)}));var y,g,f=e.itemValue.constructor.name,m=f[0].toLowerCase()+f.slice(1);if(!0===e.renderNestedLength)if((0,t.isArray)(e.itemValue)){var v=e.itemValue.length;if(e.isGroupItem){var b=Number(e.keyName.split(" ... ")[0].replace("[",""));v=Number(e.keyName.split(" ... ")[1].replace("]",""))-b+1}var _=0==v?"empty":v,j="empty"==_?"":1==_?" item":" items";d.textContent+=" (".concat(_).concat(j,")")}else(0,t.isObject)(e.itemValue)&&0===Object.keys(e.itemValue).length&&(d.textContent+=" (empty)");return d.classList.add("json2html-type__"+m),Object.values(l).length>0&&p.appendChild(h),p.appendChild(u),p.appendChild(d),Object.values(l).length>0&&(y=l,g=!1,Object.values(y).forEach((function(e){null!==e&&((0,t.isObject)(e)||(0,t.isArray)(e))&&(g=!0)})),g)&&function(e){var o="json2html-collapse-all-toggle",n=e.renderIn.querySelector("".concat(o)),r=n||document.createElement("span");n||(r.className=o),i(e.targetSpoiler,r),r.addEventListener("click",(function(o){e.renderIn.querySelectorAll("."+e.targetSpoiler.className).forEach((function(e){(0,t.emulateEvent)(e,"click"),i(e)}))})),n||e.renderIn.appendChild(r)}({targetSpoiler:h,renderIn:p,collapsed:e.collapseAll,nestedObject:l}),Object.values(l).length>0&&p.appendChild(c),p}({depth:e.depth,keyName:o,itemValue:e.parsedJSON[o],renderNestedLength:e.renderNestedLength,highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,collapseAll:e.collapseAll,showLevel:e.showLevel,showTypeOnHover:e.showTypeOnHover,groupBigArrayItemsBy:e.groupBigArrayItemsBy,isGroupItem:e.isGroupItem});n.push(r)}else{var l=function(e){var o=document.createElement("div");o.classList.add("json2html-pair");var n=document.createElement("span");n.textContent=e.keyName+": ",n.classList.add("json2html-key");var r=document.createElement("span");if("number"==typeof e.itemValue&&e.itemValue<0){var i=document.createElement("span");i.classList.add("json2html-value__minus-sign"),i.textContent="-",r.appendChild(i),r.innerHTML+=Math.abs(e.itemValue)}else r.textContent=function(e){var t="string"==typeof e,o=e;return null==e&&(o="".concat(e)),t&&(o='"'.concat(e,'"')),o}(e.itemValue);if(!0===e.showTypeOnHover){var s=null==e.itemValue?"null":typeof e.itemValue;!0===e.highlightLinks&&(0,t.isLink)(e.itemValue)&&(s="string (clickable link)"),r.setAttribute("title",s)}if(!0===e.highlightLinks&&(0,t.isLink)(e.itemValue)){var l=document.createElement("a");!0===e.openLinksInNewTab&&l.setAttribute("target","_blank"),l.href=e.itemValue,l.textContent='"'.concat(e.itemValue,'"'),r.textContent="",r.appendChild(l)}return r.classList.add("json2html-value"),r.classList.add(function(e){return"json2html-type__"+(null==e||"undefined"==e?e:typeof e)}(e.itemValue)),o.appendChild(n),o.appendChild(r),o}({keyName:o,itemValue:e.parsedJSON[o],highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,showTypeOnHover:e.showTypeOnHover});n.push(l)}})),n.forEach((function(e){r.appendChild(e)})),r}e.json2html=function(e){var t;e.rootName=e.rootName||"json",e.renderNestedLength=0!=e.renderNestedLength,e.highlightLinks=0!=e.highlightLinks,e.openLinksInNewTab=0!=e.openLinksInNewTab,e.collapseAll=1==e.collapseAll,e.showLevel=e.showLevel||1,e.showTypeOnHover=0!=e.showTypeOnHover,e.theme=e.theme||"andromeda",e.groupBigArrayItemsBy=e.groupBigArrayItemsBy<=25?25:e.groupBigArrayItemsBy||100,(0,r.updateTheme)(e.theme);try{var o=JSON.parse(e.json);return s({depth:0,parsedJSON:(t={},t[e.rootName]=o,t),renderNestedLength:e.renderNestedLength,highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,collapseAll:e.collapseAll,showLevel:e.showLevel,showTypeOnHover:e.showTypeOnHover,groupBigArrayItemsBy:e.groupBigArrayItemsBy,isGroupItem:!1})}catch(t){e.onError(t)}}})(),n})(),e.exports=t()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(()=>{"use strict";function e(e){return{carbon:"rgba(14, 14, 14, 1)",darkRed:"rgba(38, 12, 12, 1)",brightRed:"rgba(114, 6, 6, 1)",darkBlue:"rgba(12, 16, 38, 1)",brightBlue:"rgba(9, 12, 104, 1)",darkGreen:"rgba(12, 38, 12, 1)",brightGreen:"rgba(6, 114, 6, 1)"}[e]}function t(e,t){return t=Math.max(0,Math.min(t,1)),e.split(", ").map((function(e,o){return 3==o&&(e=t+")"),e})).join(", ")}function n(e,t){var o=e.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top}}function r(e,t,o){return void 0===o&&(o=0),e.x>=t.position.x-o&&e.x<=t.position.x+t.size.width+o&&e.y>=t.position.y-o&&e.y<=t.position.y+t.size.height+o}function i(e,t,o,n,r){return Math.pow(e-o,2)+Math.pow(t-n,2)<=Math.pow(r,2)}function s(e,t,o,n,r,i,s,l){switch(e.fillStyle=s,e.strokeStyle=l,e.beginPath(),i){case"up":e.moveTo(t,o),e.lineTo(t-r/2,o+n),e.lineTo(t+r/2,o+n);break;case"down":e.moveTo(t,o),e.lineTo(t-r/2,o-n),e.lineTo(t+r/2,o-n);break;case"left":e.moveTo(t,o),e.lineTo(t+n,o-r/2),e.lineTo(t+n,o+r/2);break;case"right":e.moveTo(t,o),e.lineTo(t-n,o-r/2),e.lineTo(t-n,o+r/2)}e.closePath(),e.stroke(),e.fill()}function l(e){return"".concat(e.x,",").concat(e.y)}const a=function(){function e(e,t){this.uniqueIDs=new Set,this.parent=e;var o=document.createElement("canvas");if(o.width=this.parent.width,o.height=this.parent.height,o.classList.add(t),this.body=o,this.context=o.getContext("2d"),!this.context)throw new Error("Failed to get 2D drawing context.");this.children=[]}return e.prototype.getUniqueID=function(){var e;do{e=Math.floor(1e4*Math.random())+1}while(this.uniqueIDs.has(e));return this.uniqueIDs.add(e),e},e.prototype.fill=function(e){this.context.fillStyle=e,this.context.fillRect(0,0,this.parent.width,this.parent.height)},e.prototype.appendChild=function(e){e.id=this.getUniqueID(),this.children.push(e)},e.prototype.render=function(){this.context.clearRect(0,0,this.parent.width,this.parent.height);for(var e=0,t=this.children;e<t.length;e++)t[e].renderAt(this.context)},e}();const c=function(){function e(e,t,o){this.width=t,this.height=o,this.background=new a(this,"app-canvas__background"),this.foreground=new a(this,"app-canvas__foreground");var n=document.createElement("div");n.classList.add("app-canvas__container"),n.appendChild(this.background.body),n.appendChild(this.foreground.body),n.style.width="".concat(t,"px"),n.style.height="".concat(o,"px"),document.querySelector(e).appendChild(n)}return e.prototype.addEventListener=function(e,t){this.foreground.body.addEventListener(e,(function(e){t(e)}))},e.prototype.processIntersectionsWithMouse=function(){var e=this;this.addEventListener("mousedown",(function(t){if(e.isMousePressed=!0,t instanceof MouseEvent)for(var o=n(e.foreground.body,t),r=0,s=e.foreground.children;r<s.length;r++)for(var l=0,a=s[r].ports.getAll();l<a.length;l++){var c=a[l],p=c.connectionPoint.point;i(o.x,o.y,p.x,p.y,c.r)&&c.dispatchEvent("click",{target:c})}})),this.addEventListener("mouseup",(function(t){if(e.isMousePressed=!1,t instanceof MouseEvent)for(var o=n(e.foreground.body,t),i=0,s=e.foreground.children;i<s.length;i++){var l=s[i];r(o,l)&&l.dispatchEvent("mouseup",{target:l})}})),this.addEventListener("mousemove",(function(t){if(t instanceof MouseEvent){for(var o=n(e.foreground.body,t),r={x:0,y:0},s=0,l=e.foreground.children;s<l.length;s++){var a=l[s];if(o.x>=a.position.x&&o.x<=a.position.x+a.size.width&&o.y>=a.position.y&&o.y<=a.position.y+a.size.height){var c={target:a,mousePosition:o,offset:{}};a.dispatchEvent("mousemove",c),a.eventStates.mousemove=!0,a.eventStates.mouseover||(a.dispatchEvent("mouseover",c),a.eventStates.mouseover=!0,a.eventStates.mouseout=!1),e.isMousePressed&&(c.offset={x:o.x-r.x,y:o.y-r.y},a.dispatchEvent("drag",c),r=o,a.eventStates.drag=!0),!e.isMousePressed&&a.eventStates.drag&&(a.dispatchEvent("dragend",c),a.eventStates.drag=!1)}else a.eventStates.mouseout||(a.dispatchEvent("mouseout",{target:a}),a.eventStates.mouseout=!0,a.eventStates.mouseover=!1),a.eventStates.mousemove=!1}for(var p=0,h=e.foreground.children;p<h.length;p++)for(var u=0,d=(a=h[p]).ports.getAll();u<d.length;u++){var y=d[u],g=y.connectionPoint.point;i(o.x,o.y,g.x,g.y,y.hoverR)?y.eventStates.hoveron||(y.dispatchEvent("hoveron",{target:y}),y.eventStates.hoveron=!0,y.eventStates.hoveroff=!1):y.eventStates.hoveroff||(y.dispatchEvent("hoveroff",{target:y}),y.eventStates.hoveroff=!0,y.eventStates.hoveron=!1),i(o.x,o.y,g.x,g.y,2*y.r)?y.eventStates.mouseover||(y.dispatchEvent("mouseover",{target:y}),y.eventStates.mouseover=!0,y.eventStates.mouseout=!1):y.eventStates.mouseout||(y.dispatchEvent("mouseout",{target:y}),y.eventStates.mouseout=!0,y.eventStates.mouseover=!1)}}}))},e}(),p=function(){function e(e,t,o,n,r){this.x=e,this.y=t,this.r=o,this.color=n,this.up=null,this.down=null,this.left=null,this.right=null,this.isMidlineNode=r}return e.prototype.renderAt=function(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI,!1),e.fillStyle=this.color,e.fill(),e.closePath()},e}();var h=function(e,t,o){if(o||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},u=function(){function e(e){this.parent=e.parent,this.midline={x:0,y:0};var t=this.generateSimpleGridPoints();this.nodes=this.createGraphFrom(t),this.lastPathData=null,this.style={graphNodeRadius:e.graphNodeRadius,graphLineColor:e.graphLineColor,graphLineThickness:e.graphLineThickness,graphNodeColor:e.graphNodeColor}}return e.prototype.generateSimpleGridPoints=function(){var e=function(e,t){var o=t.x,n=t.y,r=e.size,i=r.width,s=r.height,l=i/2,a=s/2,c=e.style.margin;return{centerPoint:{x:o+l,y:n+a},topCenterPoint:{x:o+l,y:n-c},leftCenterPoint:{x:o-c,y:n+a},bottomCenterPoint:{x:o+l,y:n+s+c},rightCenterPoint:{x:o+i+c,y:n+a},leftTopPoint:{x:o-c,y:n-c},leftBottomPoint:{x:o-c,y:n+s+c},rightTopPoint:{x:o+i+c,y:n-c},rightBottomPoint:{x:o+i+c,y:n+s+c}}},t=function(e,t){return t.map((function(t){return{x:t,y:e}}))},o=[],n=this.parent.endPoints[0],i=this.parent.endPoints[1],s=e(n.parent,n.parent.position),l=e(n.parent,{x:n.parent.position.x,y:i.parent.position.y}),a=e(i.parent,i.parent.position),c=e(i.parent,{x:i.parent.position.x,y:n.parent.position.y}),p=s.centerPoint,u=a.centerPoint,d=Math.round((p.x+u.x)/2),y=Math.round((p.y+u.y)/2);this.midline.x=d,this.midline.y=y;var g,f=h(h(h([],(g=d,[s.leftTopPoint.y,s.centerPoint.y,s.leftBottomPoint.y,y,l.leftTopPoint.y,l.centerPoint.y,l.leftBottomPoint.y].map((function(e){return{x:g,y:e}}))),!0),t(y,[s.leftTopPoint.x,s.centerPoint.x,s.rightBottomPoint.x]),!0),t(y,[a.leftTopPoint.x,a.centerPoint.x,a.rightBottomPoint.x]),!0);delete s.centerPoint,delete a.centerPoint,o.push.apply(o,Object.values(s)),o.push.apply(o,Object.values(l)),o.push.apply(o,Object.values(a)),o.push.apply(o,Object.values(c)),o.push.apply(o,f);var m=o.filter((function(e){var t=r(e,n.parent,n.parent.style.margin-1),o=r(e,i.parent,i.parent.style.margin-1);if(!t&&!o)return e}));return m.sort((function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x})),m},e.prototype.createGraphFrom=function(e){var t=this,o={},n=this.parent.endPoints,i=n[0].parent,s=n[1].parent,l=function(e){return"".concat(e.x,",").concat(e.y)};function a(e,t){var o={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!r(o,i)&&!r(o,s)}e.forEach((function(e){e.x==t.midline.x||e.y==t.midline.y?o["".concat(e.x,",").concat(e.y)]=new p(e.x,e.y,2,"magenta",!0):o["".concat(e.x,",").concat(e.y)]=new p(e.x,e.y,2,"orange",!1)}));for(var c=function(e,t){var o={};return t.forEach((function(e){var t=e.y;o[t]||(o[t]=[]),o[t].push(e)})),Object.values(o)}(0,e),h=0;h<c.length;h++)for(var u=c[h],d=function(e){var t=u[e],n="".concat(t.x,",").concat(t.y);if(h>0){var r=c[h-1].find((function(e){return e.x===t.x}));r&&a(t,r)&&(o[n].up=o[l(r)])}if(h<c.length-1){var i=c[h+1].find((function(e){return e.x===t.x}));i&&a(t,i)&&(o[n].down=o[l(i)])}if(e>0){var s=u[e-1];a(t,s)&&(o[n].left=o[l(s)])}if(e<u.length-1){var p=u[e+1];a(t,p)&&(o[n].right=o[l(p)])}},y=0;y<u.length;y++)d(y);return o},e.prototype.recalcPathCostByHeuristic=function(e,t,o,n){var r=0,i=n.currentNode,s=n.neighborNode,a=n.newDistance,c=n.newTurns,p=n.newMidlineNodesCount,h=this.parent.endPoints[0].letter,u=this.parent.endPoints[1].letter,d=l(i)==l(t)&&s.isMidlineNode,y=i.isMidlineNode&&s.isMidlineNode,g=i.isMidlineNode&&l(s)==l(o);return"orthogonal"===e?r=h===u?a+100*c:a+10*c-7*p+(d||y||g?-1e3:3e3):"shortest"===e&&(r=a+15*c),r},e.prototype.findPathBetween=function(e,t,o){var n=this.nodes["".concat(e.x,",").concat(e.y)],r=this.nodes["".concat(t.x,",").concat(t.y)];if("straight"===o)return[n,r];if(!n||!r)return console.error("Путь невозможен: точки старта или конца пути не найдены в графе!"),[];for(var i=[{node:n,path:[n],distance:0,turns:0,direction:null,cost:0,midlineNodesCount:0}],s={},a={up:"down",down:"up",left:"right",right:"left"};i.length>0;){i.sort((function(e,t){return e.cost-t.cost}));var c=i.shift(),p=c.node,u=c.path,d=c.distance,y=c.turns,g=c.direction,f=(c.cost,c.midlineNodesCount);if(l(p)===l(r))return this.lastPathData=c,u;if(!(y>4))for(var m={up:p.up,down:p.down,left:p.left,right:p.right},v=0,b=Object.entries(m);v<b.length;v++){var _=b[v],j=_[0],x=_[1];if(x){var T=l(x);if(s[T]=(s[T]||0)+1,s[T]>5)continue;if(null!==g&&j===a[g])continue;var w=d+Math.abs(x.x-p.x)+Math.abs(x.y-p.y),L=null===g||g===j?y:y+1,k=c.node.isMidlineNode?f+1:f;i.push({node:x,path:h(h([],u,!0),[x],!1),distance:w,turns:L,direction:j,midlineNodesCount:k,cost:this.recalcPathCostByHeuristic(o,n,r,{currentNode:p,neighborNode:x,newDistance:w,newTurns:L,newMidlineNodesCount:k})})}}}return console.error("Путь не найден."),[]},e.prototype.renderAt=function(e){if(!(Object.values(this.nodes).length<2)){e.strokeStyle=this.style.graphLineColor,e.lineWidth=this.style.graphLineThickness;var t=Object.values(this.nodes);t.forEach((function(t){t.down&&(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.down.x,t.down.y),e.stroke(),e.closePath()),t.right&&(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.right.x,t.right.y),e.stroke(),e.closePath())})),t.forEach((function(t){t.renderAt(e)}))}},e}();const d=u,y=function(){function e(e,t,o){this.endPoints=[e,t],this.graph=new d({parent:this,graphNodeRadius:2,graphNodeColor:"orange",graphLineColor:"rgba(255, 255, 255, 0.1)",graphLineThickness:1}),this.method=JSON.parse(localStorage.getItem("connectionMethod"));var n=this.endPoints[0].connectionPoint.point,r=this.endPoints[1].connectionPoint.point,i="straight";"shortest path"===this.method?i="shortest":"straight line"===this.method?i="straight":"orthogonal (elbow)"===this.method&&(i="orthogonal"),this.points=this.graph.findPathBetween(n,r,i),this.color=o}return e.prototype.renderConnecterSegmentAt=function(e,t,o){if(!this.endPoints[0]||!this.endPoints[1])return console.error("Один из портов пустой! Массив текущих значений: ",this.endPoints),!1;e.strokeStyle=this.color,e.lineWidth=1;var n=function(e){var t=[e.connectionPoint.point],o=e.parent;return"A"===e.letter?t.push({x:o.position.x-1,y:o.position.y+o.size.height/2}):"B"===e.letter?t.push({x:o.position.x+o.size.width/2,y:o.position.y-1}):"C"===e.letter?t.push({x:o.position.x+o.size.width+1,y:o.position.y+o.size.height/2}):"D"===e.letter&&t.push({x:o.position.x+o.size.width/2,y:o.position.y+o.size.height+1}),t},r=this.endPoints.map((function(e){return n(e)}));r.forEach((function(o){var n=o[0],r=o[1];"dashed"===t&&(e.setLineDash([5,5]),e.lineDashOffset=5),"dots"==t&&e.setLineDash([2,2]),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(r.x,r.y),e.moveTo(n.x,n.y),e.stroke(),e.closePath(),"solid"!==t&&"dashed"!==t&&"dots"!==t||e.setLineDash([])}));var i={A:"right",B:"down",C:"left",D:"up"};if(o)for(var l=0,a=this.endPoints;l<a.length;l++){var c=a[l];if("slave"==c.role){var p=n(c)[1];s(e,p.x,p.y,8,8,i[c.letter],this.color,this.color)}}},e.prototype.renderSegmentsAt=function(e,t){var o=!0;e.strokeStyle=this.color,e.lineWidth=1,e.beginPath(),"dashed"===t&&e.setLineDash([5,5]),"dots"==t&&e.setLineDash([2,2]);for(var n=0;n<this.points.length;n++){var r=this.points[n];o?(e.moveTo(r.x,r.y),o=!1):e.lineTo(r.x,r.y)}e.stroke(),e.closePath(),"dashed"!==t&&"dots"!==t||e.setLineDash([])},e.prototype.renderAt=function(e){var t=JSON.parse(localStorage.getItem("renderGrid")),o=JSON.parse(localStorage.getItem("renderLinePointer")),n=JSON.parse(localStorage.getItem("lineStyle"));this.renderSegmentsAt(e,n),this.renderConnecterSegmentAt(e,n,o),t&&this.graph.renderAt(e)},e}(),g=function(){function e(){this.events={},this.eventStates={mouseout:!1,mouseover:!1,mouseup:!0,mousedown:!1,mousemove:!1,hoveron:!1,hoveroff:!1,drag:!1}}return e.prototype.addEventListener=function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},e.prototype.dispatchEvent=function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))},e}();var f,m=(f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},f(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});const v=function(e){function t(t){var o=e.call(this)||this;return o.connectionPoint={point:{x:t.x,y:t.y},angle:t.angle},o.letter=t.letter,o.parent=t.parent,o.r=t.r,o.hoverR=10*o.r,o.isBusy=!1,o.endPoint=null,o.connection=null,o.style={visibility:!1,fillColor:"rgba(25, 25, 25, 1)",borderColor:"rgba(55, 55, 55, 1)",borderThickness:0},o.role=null,o}return m(t,e),t.prototype.connectTo=function(e){this.endPoint=e,e.endPoint=this,this.isBusy=!0,e.isBusy=!0,null===this.role&&null===e.role?(this.role="master",e.role="slave"):this.role="slave"===e.role?"master":"slave",this.parent.lastConnectionWith=e.parent.id,this.endPoint.parent.lastConnectionWith=this.parent.id,this.connection=new y(this,this.endPoint,"rgba(255, 255, 255, 0.5)"),this.endPoint.connection=this.connection},t.prototype.reconnect=function(){this.connection=new y(this,this.endPoint,"rgba(255, 255, 255, 0.5)"),this.endPoint.connection=this.connection},t.prototype.disconnect=function(){var e=this.endPoint;return this.connection=null,this.endPoint.connection=null,this.endPoint.endPoint=null,this.endPoint=null,this.isBusy=!1,this.role=null,e},t.prototype.renderAt=function(e){null!==this.connection&&this.connection.renderAt(e),this.style.visibility&&function(e,t,o,n,r,i){e.beginPath(),e.arc(t,o,n,0,2*Math.PI,!1),e.lineWidth=1,e.fillStyle=r,e.strokeStyle=i,e.fill(),e.stroke(),e.closePath()}(e,this.connectionPoint.point.x,this.connectionPoint.point.y,this.r,this.isBusy?"rgba(0, 155, 155, 1)":this.style.fillColor,this.isBusy?"white":this.style.borderColor)},t}(g),b=function(){function e(e){this.ports=new Map(Object.entries(e))}return e.prototype.moveAll=function(e,t){var o=this.getAll();o.forEach((function(o){o.connectionPoint.point.x+=e,o.connectionPoint.point.y+=t})),o.filter((function(e){return e.isBusy})).forEach((function(e){return e.reconnect()}))},e.prototype.getPort=function(e){return this.ports.get(e)},e.prototype.getAll=function(){return Array.from(this.ports.values())},e.prototype.hideAll=function(){this.getAll().forEach((function(e){return e.style.visibility=!1}))},e.prototype.showAll=function(){this.getAll().forEach((function(e){return e.style.visibility=!0}))},e}();var _=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const j=function(e){function o(t){var o,n,r=e.call(this)||this;return t.id=null!==(o=t.id)&&void 0!==o?o:null,t.style.margin=null!==(n=t.style.margin)&&void 0!==n?n:10,Object.assign(r,t),r.id=null,r}return _(o,e),o.prototype.updateOpacity=function(e){this.style.fillColor=t(this.style.fillColor,e),this.style.borderColor=t(this.style.borderColor,e)},o.prototype.isIntersectsWith=function(e){for(var t=2*this.style.margin+1,o=0,n=e;o<n.length;o++){var r=n[o];if(this.position.x+this.size.width+t>=r.position.x&&this.position.x-t<=r.position.x+r.size.width&&this.position.y+this.size.height+t>=r.position.y&&this.position.y-t<=r.position.y+r.size.height)return!0}return!1},o.prototype.renderAt=function(e){},o}(g);var x=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const T=function(e){function t(t){var o=e.call(this,t)||this;return Object.assign(o,t),o.ports=new b({A:new v({letter:"A",parent:o,angle:180,r:4,x:o.position.x-o.style.margin,y:o.position.y+o.size.height/2}),B:new v({letter:"B",parent:o,angle:90,r:4,x:o.position.x+o.size.width/2,y:o.position.y-o.style.margin}),C:new v({letter:"C",parent:o,angle:0,r:4,x:o.position.x+o.size.width+o.style.margin,y:o.position.y+o.size.height/2}),D:new v({letter:"D",parent:o,angle:270,r:4,x:o.position.x+o.size.width/2,y:o.position.y+o.size.height+o.style.margin})}),o}return x(t,e),t.prototype.moveTo=function(e,t,o){var n=this,r=this.position.x-e,i=this.position.y-t;this.position.x=e,this.position.y=t;var s=o.filter((function(e){return e!==n}));this.isIntersectsWith(s)&&s.forEach((function(e){e.moveTo(e.position.x-r,e.position.y-i,o)})),this.ports.moveAll(-r,-i)},t.prototype.renderAt=function(e){e.fillStyle=this.style.fillColor,e.strokeStyle=this.style.borderColor,e.lineWidth=this.style.borderThickness,e.fillRect(this.position.x,this.position.y,this.size.width,this.size.height),this.style.borderThickness>0&&e.strokeRect(this.position.x,this.position.y,this.size.width,this.size.height),this.ports.getAll().forEach((function(t){t.renderAt(e)}))},t.prototype.hasConnection=function(){return this.ports.getAll().some((function(e){return!0===e.isBusy}))},Object.defineProperty(t.prototype,"left",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.position.x+this.size.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.position.y+this.size.height},enumerable:!1,configurable:!0}),t}(j);var w=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const L=function(e){function t(t){var o,n,r=e.call(this)||this;return r.type=t.type,r.classNames=t.classNames,r.label=t.label,r.settingsKey=t.settingsKey,r.valuesList=null!==(o=t.valuesList)&&void 0!==o?o:null,r.value=null!==(n=t.value)&&void 0!==n?n:null,r.body=r.create(),r}return w(t,e),t.prototype.create=function(){var e,t=this,o=document.createElement("label");this.classNames.length>0&&(e=o.classList).add.apply(e,this.classNames),o.classList.add("app-ui__item"),o.innerText=this.label+": ";var n=null;if("text"==this.type)(n=document.createElement("span")).innerHTML=null===this.value?'<span style="color: rgba(255, 255, 255, 0.3)">null</span>':"".concat(this.value);else if(("checkbox"===this.type||"dropdown-list"===this.type)&&this.settingsKey&&"string"==typeof this.settingsKey){var r=JSON.parse(localStorage.getItem(this.settingsKey));if(null===r&&localStorage.setItem(this.settingsKey,JSON.stringify(this.value)),null!==r&&(this.value=r),"checkbox"===this.type)(n=document.createElement("input")).setAttribute("type","checkbox"),n.checked=Boolean(this.value);else if("dropdown-list"===this.type&&null!==this.valuesList&&Array.isArray(this.valuesList)){n=document.createElement("select");for(var i=0,s=this.valuesList;i<s.length;i++){var l=s[i],a=document.createElement("option");a.innerText="".concat(l),l===this.value&&a.setAttribute("selected",""),n.appendChild(a)}}n&&n.addEventListener("change",(function(e){"checkbox"==t.type&&(t.value=e.target.checked),"dropdown-list"==t.type&&(t.value=n.value),localStorage.setItem(t.settingsKey,JSON.stringify(t.value)),t.dispatchEvent("change",{})}))}return n&&o.appendChild(n),o},t.prototype.updateValue=function(e){this.value=e,this.body.children[0].innerHTML="".concat(e)},t.prototype.replaceChild=function(e){this.body.replaceChild(e,this.body.children[0])},t.prototype.resetValue=function(){this.value=null;var e=document.createElement("span");e.innerHTML='<span style="color: rgba(255, 255, 255, 0.3)">null</span>',this.body.replaceChild(e,this.body.children[0])},t}(g);const k=function(e,t,o){var n=document.createElement("div");n.classList.add("app-ui__container"),n.style.width="".concat(t,"px"),n.style.height="".concat(o,"px");var r=document.createElement("div");r.classList.add("app-ui__container-inner"),document.querySelector(e).appendChild(n),this.root=n;var i=new L({type:"checkbox",label:"Render grid",classNames:[],value:!1,settingsKey:"renderGrid"}),s=new L({type:"dropdown-list",label:"Line style",classNames:["app-ui__dropdown-list"],valuesList:["solid","dashed","dots"],value:"solid",settingsKey:"lineStyle"}),l=new L({type:"dropdown-list",label:"Connection method",classNames:["app-ui__dropdown-list"],valuesList:["shortest path","straight line","orthogonal (elbow)"],value:"shortest path",settingsKey:"connectionMethod"}),a=new L({type:"checkbox",label:"Render pointer",classNames:[],value:!0,settingsKey:"renderLinePointer"}),c=new L({type:"text",label:"Mouse target",classNames:["app-ui__mouse-target-display"],value:null,settingsKey:null});c.body.style.width="93%",this.elements={renderGrid:i,renderLinePointer:a,lineStyle:s,connectionMethod:l,mouseTarget:c};var p=document.createElement("h3");p.innerText="[Dev UI]",p.classList.add("app-ui__title"),r.appendChild(p),r.appendChild(this.elements.renderGrid.body),r.appendChild(this.elements.renderLinePointer.body),r.appendChild(this.elements.lineStyle.body),r.appendChild(this.elements.connectionMethod.body),r.appendChild(this.elements.mouseTarget.body),n.appendChild(r)};var C=o(838),S="#app-root",P=new c(S,500,500),A=new k(S,350,500),E=new T({size:{width:100,height:80},position:{x:50,y:50},style:{fillColor:e("darkRed"),borderColor:e("brightRed"),borderThickness:2,margin:20}}),N=new T({size:{width:100,height:80},position:{x:350,y:350},style:{fillColor:e("darkBlue"),borderColor:e("brightBlue"),borderThickness:2,margin:20}});P.foreground.appendChild(E),P.foreground.appendChild(N),E.ports.getPort("C").connectTo(N.ports.getPort("A")),P.background.fill(e("carbon")),function(e,t){var o=e.canvas,n=o.width,r=o.height;e.strokeStyle=t.gridLineColor,e.lineWidth=t.gridLineThickness,e.beginPath();for(var i=0;i<=n;i+=t.gridSize)e.moveTo(i,0),e.lineTo(i,r);for(var s=0;s<=r;s+=t.gridSize)e.moveTo(0,s),e.lineTo(n,s);e.stroke()}(P.background.context,{gridSize:20,gridLineColor:"rgba(255, 255, 255, 0.025)",gridLineThickness:1});var O=function(){requestAnimationFrame(O),P.foreground.render()},B=function(e){return(0,C.json2html)({json:JSON.stringify(e),theme:"dracula",showTypeOnHover:!0})};O(),A.elements.connectionMethod.addEventListener("change",(function(){P.foreground.children.length>0&&P.foreground.children.find((function(e){return!0===e.hasConnection()})).ports.getAll().find((function(e){return!0===e.isBusy})).reconnect()})),P.foreground.children.forEach((function(e){e.addEventListener("mouseover",(function(t){e.updateOpacity(.35),P.foreground.body.style.cursor="pointer",A.elements.mouseTarget.replaceChild(B({class:"RectangleShape",id:t.target.id,x:t.target.position.x,y:t.target.position.y}))})),e.addEventListener("mouseout",(function(t){e.updateOpacity(1),P.foreground.body.style.cursor="initial",A.elements.mouseTarget.resetValue()})),e.addEventListener("drag",(function(t){e.updateOpacity(.1),e.moveTo(t.offset.x-e.size.width/2,t.offset.y-e.size.height/2,P.foreground.children),P.foreground.body.style.cursor="grab"})),e.addEventListener("dragend",(function(t){e.updateOpacity(.35),P.foreground.body.style.cursor="pointer"})),e.addEventListener("mouseup",(function(e){A.elements.mouseTarget.replaceChild(B({class:"RectangleShape",id:e.target.id,x:e.target.position.x,y:e.target.position.y}))})),e.ports.getAll().forEach((function(t){t.addEventListener("mouseover",(function(){e.hasConnection()&&!t.isBusy||(P.foreground.body.style.cursor="pointer",t.style.visibility=!0,t.style.fillColor="rgba(55, 55, 55, 1)",A.elements.mouseTarget.replaceChild(B({class:"Port",letter:t.letter,x:t.connectionPoint.point.x,y:t.connectionPoint.point.y,parent:t.parent.id,isBusy:t.isBusy,endPoint:!0===t.isBusy?t.endPoint.parent.id:null,role:!0===t.isBusy?t.role:null})))})),t.addEventListener("hoveron",(function(){e.hasConnection()&&t.isBusy&&(t.style.visibility=!0)})),t.addEventListener("hoveroff",(function(){e.hasConnection()&&t.isBusy&&(t.style.visibility=!1)})),t.addEventListener("mouseout",(function(){e.hasConnection()&&!t.isBusy||(P.foreground.body.style.cursor="initial",t.style.fillColor="rgba(25, 25, 25, 1)",A.elements.mouseTarget.resetValue())})),t.addEventListener("click",(function(){if(t.isBusy)t.parent.lastConnectionWith=t.disconnect().parent.id,e.ports.showAll();else if(!e.hasConnection()&&!t.isBusy&&t.parent.lastConnectionWith){var o=P.foreground.children.find((function(e){return e.id===t.parent.lastConnectionWith})).ports.getAll().find((function(e){return!0===e.isBusy}));t.connectTo(o),e.ports.hideAll()}}))}))})),P.processIntersectionsWithMouse(),console.log(P,A,E)})()})();