(()=>{var e={838:function(e){var t;t=()=>(()=>{"use strict";var e={523:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emulateEvent=t.addMultipleEventHandlers=t.isObject=t.isArray=t.isLink=void 0,t.isLink=function(e){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e)},t.isArray=function(e){return null!==e&&"Array"===e.constructor.name},t.isObject=function(e){return null!==e&&"Object"===e.constructor.name},t.addMultipleEventHandlers=function(e,t,o){e.forEach((function(e){e.addEventListener(t,(function(e){o(e)}))}))},t.emulateEvent=function(e,t){var o=document.createEvent("Events");o.initEvent(t,!0,!1),e.dispatchEvent(o)}},298:function(e,t){var o=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};function n(e){var t="\n/* generated by src/ts/lib/themes.ts generateCSSCode() function */\n    ";return Object.keys(e).forEach((function(n){var r=e[n].selector,i=o([],Object.keys(e[n].properties),!0).map((function(t){return"".concat(t,": ").concat(e[n].properties[t],";\n")})).join("");t+="\n".concat(r," {\n    ").concat(i,"}\n")})),t}function r(e,t){var o=document.head.querySelector(t);if(o)o.innerHTML=e;else{var n=document.createElement("style"),r=t.split("=")[0].replace(/\[+/gm,""),i=t.split("=")[1].replace(/(\]|\")+/gm,"");n.type="text/css",n.setAttribute(r,i),n.innerHTML=e,document.head.appendChild(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTheme=t.updateThemeCSS=t.generateCSSCode=void 0,t.generateCSSCode=n,t.updateThemeCSS=r,t.updateTheme=function(e){if(/css\/themes\/[a-zA-Z\-0-9]+\.css/.test(e)){var t=e,o=document.createElement("link");o.href=t,o.rel="stylesheet",document.head.appendChild(o)}else{var i=function(e){return{andromeda:{container:{selector:".json2html-container",properties:{background:"#23262E"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#9c967a"}},key:{selector:".json2html-key",properties:{color:"#00e8c6"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#ee5d43"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#ee5d43"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#f39c12"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#96E072"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#3B79C7"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#4e4f54"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#f92672"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#646b7c"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#8490a8"}}},daylight:{container:{selector:".json2html-container",properties:{background:"white"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"blue"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"blueviolet"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#b44343"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#1e7fcc"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#4caf50"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#4caf50"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#9b9b9b"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#795548"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#646b7c"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#000000"}}},dracula:{container:{selector:".json2html-container",properties:{background:"#282a36"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#ffffff"}},key:{selector:".json2html-key",properties:{color:"#8be9fd"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#bd93f9"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#ff79c6"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#bd93f9"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#f1fa8c"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#ff79c6"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#6272a4"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#ffb86c"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#f8f8f2"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"white"}}},"github-dark":{container:{selector:".json2html-container",properties:{background:"#0d1117"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#afafaf"}},key:{selector:".json2html-key",properties:{color:"#c9d1d9"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#b392f0"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#ff79c6"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#9ecbff"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#9ecbff"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#9ecbff"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#6a737d"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#9ecbff"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#9ecbff"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#6a737d"}}},"github-light":{container:{selector:".json2html-container",properties:{background:"#ffffff"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#afafaf"}},key:{selector:".json2html-key",properties:{color:"#25292f"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#6f42c1"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#25292f"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#005cc5"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#0a3069"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#0a3069"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#6a737d"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#005cc5"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#005cc5"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#6a737d"}}},"gruvbox-dark":{container:{selector:".json2html-container",properties:{background:"#282828"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"#98971A"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#B16286"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#8ec07c"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#B16286"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#458588"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#689D6A"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#504945"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#CC241D"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#A89984"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#6a737d"}}},"gruvbox-light":{container:{selector:".json2html-container",properties:{background:"#FBF1C7"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#9c967a"}},key:{selector:".json2html-key",properties:{color:"#98971A"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#B16286"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#CC241D"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#B16286"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#458588"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#689D6A"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#BDAE93"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#CC241D"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#7C6F64"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#7C6F64"}}},horizon:{container:{selector:".json2html-container",properties:{background:"#fffbf7"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"#da103f"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#8a31b9"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#b44343"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#1766a5"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#f6661e"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#c14e15"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#9b9b9b"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#3f51b5"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#846e64"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"#black"}}},monokai:{container:{selector:".json2html-container",properties:{background:"#272822"}},spoilerToggle:{selector:".json2html-spoiler-toggle--collapsed, .json2html-spoiler-toggle--uncollapsed",properties:{color:"#585858"}},key:{selector:".json2html-key",properties:{color:"#F92672"}},valueTypeBoolean:{selector:".json2html-type__boolean",properties:{color:"#AE81FF"}},valueMinusSign:{selector:".json2html-value__minus-sign",properties:{color:"#f92672"}},valueTypeNumber:{selector:".json2html-type__number",properties:{color:"#AE81FF"}},valueTypeString:{selector:".json2html-type__string",properties:{color:"#E6DB74"}},valueTypeStringLink:{selector:".json2html-type__string a, .json2html-type__string a:visited",properties:{color:"#F8F8F2"}},valueTypeNull:{selector:".json2html-type__null",properties:{color:"#75715E"}},valueTypeUndefined:{selector:".json2html-type__undefined",properties:{color:"#FD971F"}},valueComplexItemSignature:{selector:".json2html-type__array, .json2html-type__object",properties:{color:"#66D9EF"}},collapseAllToggle:{selector:".json2html-collapse-all-toggle",properties:{color:"white"}}}}[e]}(e);r(n(i),'[data-style-origin="json2html"]')}}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.json2html=void 0;var t=o(523),r=o(298);function i(e,t){t=t||e.parentElement.querySelector(".".concat("json2html-collapse-all-toggle"));var o="uncollapsed"==e.className.split("--")[1]?"collapse":"uncollapse";t&&(t.textContent="(".concat(o," all)"))}function s(e){var o=Object.keys(e.parsedJSON),n=[],r=document.createElement("div");return r.classList.add("json2html-container"),o.forEach((function(o){if((0,t.isArray)(e.parsedJSON[o])||(0,t.isObject)(e.parsedJSON[o])){var r=function(e){var o=e.depth+1,n=Object.values(e.itemValue),r=n.length>e.groupBigArrayItemsBy,l=r?function(e,t){for(var o=0,n={},r=function(r){var i=r*t>e.length?e.length:r*t,s="[".concat(o," ... ").concat(i-1,"]"),l=e.slice(o,i),a=[];l.forEach((function(e,t){a[t+o]=e})),o!==i&&(n[s]=a),o=r*t},i=0;i<=Math.ceil(e.length/t);i++)r(i);return n}(n,e.groupBigArrayItemsBy):e.itemValue,a=Object.values(l).length,c=s({depth:o,parsedJSON:l,renderNestedLength:e.renderNestedLength,highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,collapseAll:e.collapseAll,showLevel:e.showLevel,showTypeOnHover:e.showTypeOnHover,groupBigArrayItemsBy:e.groupBigArrayItemsBy,isGroupItem:r});c.classList.add("json2html-nested-value");var p=document.createElement("div");p.classList.add("json2html-complex-pair"),p.setAttribute("data-tree-level","".concat(o));var u=document.createElement("span");u.textContent="▶",!0===e.collapseAll?(u.classList.add("json2html-spoiler-toggle--collapsed"),c.setAttribute("hidden","")):o<=e.showLevel?u.classList.add("json2html-spoiler-toggle--uncollapsed"):(u.classList.add("json2html-spoiler-toggle--collapsed"),c.setAttribute("hidden",""));var h=document.createElement("span");h.textContent=e.keyName+": ",h.classList.add("json2html-key");var d=document.createElement("span");d.textContent=e.itemValue.constructor.name,a>0&&(0,t.addMultipleEventHandlers)([u,h,d],"click",(function(e){var t="json2html-spoiler-toggle--collapsed",o="json2html-spoiler-toggle--uncollapsed";u.classList.contains(t)?(u.classList.remove(t),u.classList.add(o),c.removeAttribute("hidden")):(u.classList.add(t),u.classList.remove(o),c.setAttribute("hidden","")),i(u)}));var y,g,m=e.itemValue.constructor.name,f=m[0].toLowerCase()+m.slice(1);if(!0===e.renderNestedLength)if((0,t.isArray)(e.itemValue)){var v=e.itemValue.length;if(e.isGroupItem){var b=Number(e.keyName.split(" ... ")[0].replace("[",""));v=Number(e.keyName.split(" ... ")[1].replace("]",""))-b+1}var _=0==v?"empty":v,j="empty"==_?"":1==_?" item":" items";d.textContent+=" (".concat(_).concat(j,")")}else(0,t.isObject)(e.itemValue)&&0===Object.keys(e.itemValue).length&&(d.textContent+=" (empty)");return d.classList.add("json2html-type__"+f),Object.values(l).length>0&&p.appendChild(u),p.appendChild(h),p.appendChild(d),Object.values(l).length>0&&(y=l,g=!1,Object.values(y).forEach((function(e){null!==e&&((0,t.isObject)(e)||(0,t.isArray)(e))&&(g=!0)})),g)&&function(e){var o="json2html-collapse-all-toggle",n=e.renderIn.querySelector("".concat(o)),r=n||document.createElement("span");n||(r.className=o),i(e.targetSpoiler,r),r.addEventListener("click",(function(o){e.renderIn.querySelectorAll("."+e.targetSpoiler.className).forEach((function(e){(0,t.emulateEvent)(e,"click"),i(e)}))})),n||e.renderIn.appendChild(r)}({targetSpoiler:u,renderIn:p,collapsed:e.collapseAll,nestedObject:l}),Object.values(l).length>0&&p.appendChild(c),p}({depth:e.depth,keyName:o,itemValue:e.parsedJSON[o],renderNestedLength:e.renderNestedLength,highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,collapseAll:e.collapseAll,showLevel:e.showLevel,showTypeOnHover:e.showTypeOnHover,groupBigArrayItemsBy:e.groupBigArrayItemsBy,isGroupItem:e.isGroupItem});n.push(r)}else{var l=function(e){var o=document.createElement("div");o.classList.add("json2html-pair");var n=document.createElement("span");n.textContent=e.keyName+": ",n.classList.add("json2html-key");var r=document.createElement("span");if("number"==typeof e.itemValue&&e.itemValue<0){var i=document.createElement("span");i.classList.add("json2html-value__minus-sign"),i.textContent="-",r.appendChild(i),r.innerHTML+=Math.abs(e.itemValue)}else r.textContent=function(e){var t="string"==typeof e,o=e;return null==e&&(o="".concat(e)),t&&(o='"'.concat(e,'"')),o}(e.itemValue);if(!0===e.showTypeOnHover){var s=null==e.itemValue?"null":typeof e.itemValue;!0===e.highlightLinks&&(0,t.isLink)(e.itemValue)&&(s="string (clickable link)"),r.setAttribute("title",s)}if(!0===e.highlightLinks&&(0,t.isLink)(e.itemValue)){var l=document.createElement("a");!0===e.openLinksInNewTab&&l.setAttribute("target","_blank"),l.href=e.itemValue,l.textContent='"'.concat(e.itemValue,'"'),r.textContent="",r.appendChild(l)}return r.classList.add("json2html-value"),r.classList.add(function(e){return"json2html-type__"+(null==e||"undefined"==e?e:typeof e)}(e.itemValue)),o.appendChild(n),o.appendChild(r),o}({keyName:o,itemValue:e.parsedJSON[o],highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,showTypeOnHover:e.showTypeOnHover});n.push(l)}})),n.forEach((function(e){r.appendChild(e)})),r}e.json2html=function(e){var t;e.rootName=e.rootName||"json",e.renderNestedLength=0!=e.renderNestedLength,e.highlightLinks=0!=e.highlightLinks,e.openLinksInNewTab=0!=e.openLinksInNewTab,e.collapseAll=1==e.collapseAll,e.showLevel=e.showLevel||1,e.showTypeOnHover=0!=e.showTypeOnHover,e.theme=e.theme||"andromeda",e.groupBigArrayItemsBy=e.groupBigArrayItemsBy<=25?25:e.groupBigArrayItemsBy||100,(0,r.updateTheme)(e.theme);try{var o=JSON.parse(e.json);return s({depth:0,parsedJSON:(t={},t[e.rootName]=o,t),renderNestedLength:e.renderNestedLength,highlightLinks:e.highlightLinks,openLinksInNewTab:e.openLinksInNewTab,collapseAll:e.collapseAll,showLevel:e.showLevel,showTypeOnHover:e.showTypeOnHover,groupBigArrayItemsBy:e.groupBigArrayItemsBy,isGroupItem:!1})}catch(t){e.onError(t)}}})(),n})(),e.exports=t()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(()=>{"use strict";function e(e){return{carbon:"rgba(14, 14, 14, 1)",darkRed:"rgba(38, 12, 12, 1)",brightRed:"rgba(114, 6, 6, 1)",darkBlue:"rgba(12, 16, 38, 1)",brightBlue:"rgba(9, 12, 104, 1)",darkGreen:"rgba(12, 38, 12, 1)",brightGreen:"rgba(6, 114, 6, 1)"}[e]}function t(e,t){return t=Math.max(0,Math.min(t,1)),e.split(", ").map((function(e,o){return 3==o&&(e=t+")"),e})).join(", ")}function n(e,t){var o=e.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top}}function r(e,t,o){return void 0===o&&(o=0),e.x>=t.position.x-o&&e.x<=t.position.x+t.size.width+o&&e.y>=t.position.y-o&&e.y<=t.position.y+t.size.height+o}function i(e,t,o,n,r){return Math.pow(e-o,2)+Math.pow(t-n,2)<=Math.pow(r,2)}const s=function(){function e(e,t){this.uniqueIDs=new Set,this.parent=e;var o=document.createElement("canvas");if(o.width=this.parent.width,o.height=this.parent.height,o.classList.add(t),this.body=o,this.context=o.getContext("2d"),!this.context)throw new Error("Failed to get 2D drawing context.");this.children=[]}return e.prototype.getUniqueID=function(){var e;do{e=Math.floor(1e4*Math.random())+1}while(this.uniqueIDs.has(e));return this.uniqueIDs.add(e),e},e.prototype.fill=function(e){this.context.fillStyle=e,this.context.fillRect(0,0,this.parent.width,this.parent.height)},e.prototype.appendChild=function(e){e.id=this.getUniqueID(),this.children.push(e)},e.prototype.render=function(){this.context.clearRect(0,0,this.parent.width,this.parent.height);for(var e=0,t=this.children;e<t.length;e++)t[e].renderAt(this.context)},e}();const l=function(){function e(e,t,o){this.width=t,this.height=o,this.background=new s(this,"app-canvas__background"),this.foreground=new s(this,"app-canvas__foreground");var n=document.createElement("div");n.classList.add("app-canvas__container"),n.appendChild(this.background.body),n.appendChild(this.foreground.body),n.style.width="".concat(t,"px"),n.style.height="".concat(o,"px"),document.querySelector(e).appendChild(n)}return e.prototype.addEventListener=function(e,t){this.foreground.body.addEventListener(e,(function(e){t(e)}))},e.prototype.processIntersectionsWithMouse=function(){var e=this;this.addEventListener("mousedown",(function(t){if(e.isMousePressed=!0,t instanceof MouseEvent)for(var o=n(e.foreground.body,t),r=0,s=e.foreground.children;r<s.length;r++)for(var l=s[r],a=0,c=Object.values(l.ports);a<c.length;a++){var p=c[a],u=p.connectionPoint.point;i(o.x,o.y,u.x,u.y,p.r)&&p.dispatchEvent("click",{target:p})}})),this.addEventListener("mouseup",(function(t){if(e.isMousePressed=!1,t instanceof MouseEvent)for(var o=n(e.foreground.body,t),i=0,s=e.foreground.children;i<s.length;i++){var l=s[i];r(o,l)&&l.dispatchEvent("mouseup",{target:l})}})),this.addEventListener("mousemove",(function(t){if(t instanceof MouseEvent){for(var o=n(e.foreground.body,t),r={x:0,y:0},s=0,l=e.foreground.children;s<l.length;s++){var a=l[s];if(o.x>=a.position.x&&o.x<=a.position.x+a.size.width&&o.y>=a.position.y&&o.y<=a.position.y+a.size.height){var c={target:a,mousePosition:o,offset:{}};a.dispatchEvent("mousemove",c),a.eventStates.mousemove=!0,a.eventStates.mouseover||(a.dispatchEvent("mouseover",c),a.eventStates.mouseover=!0,a.eventStates.mouseout=!1),e.isMousePressed&&(c.offset={x:o.x-r.x,y:o.y-r.y},a.dispatchEvent("drag",c),r=o,a.eventStates.drag=!0),!e.isMousePressed&&a.eventStates.drag&&(a.dispatchEvent("dragend",c),a.eventStates.drag=!1)}else a.eventStates.mouseout||(a.dispatchEvent("mouseout",{target:a}),a.eventStates.mouseout=!0,a.eventStates.mouseover=!1),a.eventStates.mousemove=!1}for(var p=0,u=e.foreground.children;p<u.length;p++){a=u[p];for(var h=0,d=Object.values(a.ports);h<d.length;h++){var y=d[h],g=y.connectionPoint.point;i(o.x,o.y,g.x,g.y,y.hoverR)?y.eventStates.hoveron||(y.dispatchEvent("hoveron",{target:y}),y.eventStates.hoveron=!0,y.eventStates.hoveroff=!1):y.eventStates.hoveroff||(y.dispatchEvent("hoveroff",{target:y}),y.eventStates.hoveroff=!0,y.eventStates.hoveron=!1),i(o.x,o.y,g.x,g.y,2*y.r)?y.eventStates.mouseover||(y.dispatchEvent("mouseover",{target:y}),y.eventStates.mouseover=!0,y.eventStates.mouseout=!1):y.eventStates.mouseout||(y.dispatchEvent("mouseout",{target:y}),y.eventStates.mouseout=!0,y.eventStates.mouseover=!1)}}}}))},e}(),a=function(){function e(e,t,o,n){this.x=e,this.y=t,this.r=o,this.color=n,this.up=null,this.down=null,this.left=null,this.right=null}return e.prototype.renderAt=function(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI,!1),e.fillStyle=this.color,e.fill(),e.closePath()},e}();var c=function(e,t,o){if(o||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},p=function(){function e(e){this.parent=e.parent;var t=this.generateSimpleGridPoints();this.nodes=this.createGraphFrom(t),this.style={graphNodeRadius:e.graphNodeRadius,graphLineColor:e.graphLineColor,graphLineThickness:e.graphLineThickness,graphNodeColor:e.graphNodeColor}}return e.prototype.generateSimpleGridPoints=function(){var e,t=function(e,t){var o=t.x,n=t.y,r=e.size,i=r.width,s=r.height,l=i/2,a=s/2,c=e.style.margin;return{centerPoint:{x:o+l,y:n+a},topCenterPoint:{x:o+l,y:n-c},leftCenterPoint:{x:o-c,y:n+a},bottomCenterPoint:{x:o+l,y:n+s+c},rightCenterPoint:{x:o+i+c,y:n+a},leftTopPoint:{x:o-c,y:n-c},leftBottomPoint:{x:o-c,y:n+s+c},rightTopPoint:{x:o+i+c,y:n-c},rightBottomPoint:{x:o+i+c,y:n+s+c}}},o=function(e,t){return t.map((function(t){return{x:t,y:e}}))},n=[],i=this.parent.endPoints[0],s=this.parent.endPoints[1],l=t(i.parent,i.parent.position),a=t(i.parent,{x:i.parent.position.x,y:s.parent.position.y}),p=t(s.parent,s.parent.position),u=t(s.parent,{x:s.parent.position.x,y:i.parent.position.y}),h=l.centerPoint,d=p.centerPoint,y=(h.x+d.x)/2,g=(h.y+d.y)/2,m=c(c(c([],(e=y,[l.leftTopPoint.y,l.centerPoint.y,l.leftBottomPoint.y,g,a.leftTopPoint.y,a.centerPoint.y,a.leftBottomPoint.y].map((function(t){return{x:e,y:t}}))),!0),o(g,[l.leftTopPoint.x,l.centerPoint.x,l.rightBottomPoint.x]),!0),o(g,[p.leftTopPoint.x,p.centerPoint.x,p.rightBottomPoint.x]),!0);return delete l.centerPoint,delete p.centerPoint,n.push.apply(n,Object.values(l)),n.push.apply(n,Object.values(a)),n.push.apply(n,Object.values(p)),n.push.apply(n,Object.values(u)),n.push.apply(n,m),n.filter((function(e){var t=r(e,i.parent,i.parent.style.margin-1),o=r(e,s.parent,s.parent.style.margin-1);if(!t&&!o)return e})).sort((function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x}))},e.prototype.createGraphFrom=function(e){var t={},o=this.parent.endPoints,n=o[0].parent,i=o[1].parent,s=function(e){return"".concat(e.x,",").concat(e.y)};function l(e,t){var o={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!r(o,n)&&!r(o,i)}n.ports.getAll().map((function(e){return e.connectionPoint.point})),i.ports.getAll().map((function(e){return e.connectionPoint.point})),e.forEach((function(e){t["".concat(e.x,",").concat(e.y)]=new a(e.x,e.y,2,"orange")}));for(var c=function(e,t){var o={};return t.forEach((function(e){var t=e.y;o[t]||(o[t]=[]),o[t].push(e)})),Object.values(o)}(0,e),p=0;p<c.length;p++)for(var u=c[p],h=function(e){var o=u[e],n="".concat(o.x,",").concat(o.y);if(p>0){var r=c[p-1].find((function(e){return e.x===o.x}));r&&l(o,r)&&(t[n].up=t[s(r)])}if(p<c.length-1){var i=c[p+1].find((function(e){return e.x===o.x}));i&&l(o,i)&&(t[n].down=t[s(i)])}if(e>0){var a=u[e-1];l(o,a)&&(t[n].left=t[s(a)])}if(e<u.length-1){var h=u[e+1];l(o,h)&&(t[n].right=t[s(h)])}},d=0;d<u.length;d++)h(d);return t},e.prototype.findPathBetween=function(e,t){var o=function(e){return"".concat(e.x,",").concat(e.y)},n=this.nodes["".concat(e.x,",").concat(e.y)],r=this.nodes["".concat(t.x,",").concat(t.y)];if(!n||!r)return console.error("Путь невозможен: точки старта или конца пути не найдены в графе!"),[];var i=[{node:n,path:[n],distance:0,turns:0,direction:null}],s=new Set;s.add(o(n));for(var l={up:"down",down:"up",left:"right",right:"left"};i.length>0;){i.sort((function(e,t){return e.turns-t.turns||e.distance-t.distance}));var a=i.shift(),p=a.node,u=a.path,h=a.distance,d=a.turns,y=a.direction;if(o(p)===o(r))return console.log("Найден путь:",u),console.log("Оставшиеся альтернативные пути:",i),u;for(var g={up:p.up,down:p.down,left:p.left,right:p.right},m=0,f=Object.entries(g);m<f.length;m++){var v=f[m],b=v[0],_=v[1];if(_){var j=o(_);if(s.has(j))continue;if(null!==y&&b===l[y])continue;var x=h+Math.abs(_.x-p.x)+Math.abs(_.y-p.y),T=null===y||y===b?d:d+1;i.push({node:_,path:c(c([],u,!0),[_],!1),distance:x,turns:T,direction:b}),s.add(j)}}}return console.error("Путь не найден."),[]},e.prototype.renderAt=function(e){if(!(Object.values(this.nodes).length<2)){e.strokeStyle=this.style.graphLineColor,e.lineWidth=this.style.graphLineThickness;var t=Object.values(this.nodes);t.forEach((function(t){t.down&&(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.down.x,t.down.y),e.stroke(),e.closePath()),t.right&&(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.right.x,t.right.y),e.stroke(),e.closePath())})),t.forEach((function(t){t.renderAt(e)}))}},e}();const u=p,h=function(){function e(e,t){this.endPoints=[e,t],this.graph=new u({parent:this,graphNodeRadius:2,graphNodeColor:"orange",graphLineColor:"rgba(255, 255, 255, 0.1)",graphLineThickness:1});var o=this.endPoints[0].connectionPoint.point,n=this.endPoints[1].connectionPoint.point;this.points=this.graph.findPathBetween(o,n)}return e.prototype.renderSegmentsAt=function(e){var t=!0;e.beginPath(),e.lineWidth=1,e.strokeStyle="rgba(100, 100, 100, 1)";for(var o=0;o<this.points.length;o++){var n=this.points[o];t?(e.moveTo(n.x,n.y),t=!1):e.lineTo(n.x,n.y),e.stroke()}e.closePath()},e.prototype.renderAt=function(e){this.renderSegmentsAt(e),JSON.parse(localStorage.getItem("renderGrid"))&&this.graph.renderAt(e)},e}(),d=function(){function e(){this.events={},this.eventStates={mouseout:!1,mouseover:!1,mouseup:!0,mousedown:!1,mousemove:!1,hoveron:!1,hoveroff:!1,drag:!1}}return e.prototype.addEventListener=function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},e.prototype.dispatchEvent=function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))},e}();var y,g=(y=function(e,t){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},y(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});const m=function(e){function t(t){var o=e.call(this)||this;return o.connectionPoint={point:{x:t.x,y:t.y},angle:t.angle},o.letter=t.letter,o.parent=t.parent,o.r=t.r,o.hoverR=10*o.r,o.isBusy=!1,o.endPoint=null,o.connection=null,o.style={visibility:!1,fillColor:"rgba(255, 255, 255, 0.2",borderColor:"rgba(255, 255, 255, 0.2",borderThickness:0},o}return g(t,e),t.prototype.connectTo=function(e){this.endPoint=e,e.endPoint=this,this.isBusy=!0,e.isBusy=!0,this.connection=new h(this,this.endPoint),this.endPoint.connection=this.connection},t.prototype.reconnect=function(){this.connection=new h(this,this.endPoint),this.endPoint.connection=this.connection},t.prototype.renderAt=function(e){null!==this.connection&&this.connection.renderAt(e),this.style.visibility&&(e.beginPath(),e.arc(this.connectionPoint.point.x,this.connectionPoint.point.y,this.r,0,2*Math.PI,!1),e.fillStyle=this.isBusy?"rgba(125, 125, 125, 0.3)":this.parent.style.fillColor,e.strokeStyle=this.isBusy?"rgba(155, 155, 155, 0.4)":this.parent.style.borderColor,e.fill(),e.stroke(),e.closePath())},t}(d),f=function(){function e(e){var t=e.A,o=e.B,n=e.C,r=e.D;this.A=t,this.B=o,this.C=n,this.D=r}return e.prototype.moveAll=function(e,t){[this.A,this.B,this.C,this.D].forEach((function(o){o.connectionPoint.point.x+=e,o.connectionPoint.point.y+=t,o.isBusy&&o.reconnect()}))},e.prototype.getAll=function(){return[this.A,this.B,this.C,this.D]},e}();var v=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const b=function(e){function o(t){var o,n,r=e.call(this)||this;return t.id=null!==(o=t.id)&&void 0!==o?o:null,t.style.margin=null!==(n=t.style.margin)&&void 0!==n?n:10,Object.assign(r,t),r.id=null,r}return v(o,e),o.prototype.updateOpacity=function(e){this.style.fillColor=t(this.style.fillColor,e),this.style.borderColor=t(this.style.borderColor,e)},o.prototype.isIntersectsWith=function(e){for(var t=2*this.style.margin,o=0,n=e;o<n.length;o++){var r=n[o];if(this.position.x+this.size.width+t>=r.position.x&&this.position.x-t<=r.position.x+r.size.width&&this.position.y+this.size.height+t>=r.position.y&&this.position.y-t<=r.position.y+r.size.height)return!0}return!1},o.prototype.renderAt=function(e){},o}(d);var _=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const j=function(e){function t(t){var o=e.call(this,t)||this;return Object.assign(o,t),o.ports=new f({A:new m({letter:"A",parent:o,angle:180,r:3,x:o.position.x-o.style.margin,y:o.position.y+o.size.height/2}),B:new m({letter:"B",parent:o,angle:90,r:3,x:o.position.x+o.size.width/2,y:o.position.y-o.style.margin}),C:new m({letter:"C",parent:o,angle:0,r:3,x:o.position.x+o.size.width+o.style.margin,y:o.position.y+o.size.height/2}),D:new m({letter:"D",parent:o,angle:270,r:3,x:o.position.x+o.size.width/2,y:o.position.y+o.size.height+o.style.margin})}),o}return _(t,e),t.prototype.moveTo=function(e,t,o){var n=this,r=this.position.x-e,i=this.position.y-t;this.position.x=e,this.position.y=t;var s=o.filter((function(e){return e!==n}));this.isIntersectsWith(s)&&s.forEach((function(e){e.moveTo(e.position.x-r,e.position.y-i,o)})),this.ports.moveAll(-r,-i)},t.prototype.renderAt=function(e){e.fillStyle=this.style.fillColor,e.strokeStyle=this.style.borderColor,e.lineWidth=this.style.borderThickness,e.fillRect(this.position.x,this.position.y,this.size.width,this.size.height),this.style.borderThickness>0&&e.strokeRect(this.position.x,this.position.y,this.size.width,this.size.height),Object.values(this.ports).forEach((function(t){t.renderAt(e)}))},Object.defineProperty(t.prototype,"left",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.position.x+this.size.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.position.y+this.size.height},enumerable:!1,configurable:!0}),t}(b);var x=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const T=function(e){function t(t){var o=e.call(this)||this;return o.type=t.type,o.classNames=t.classNames,o.label=t.label,o.settingsKey=t.settingsKey,o.value=t.value&&null,o.body=o.create(),o}return x(t,e),t.prototype.create=function(){var e,t=this,o=document.createElement("label");this.classNames.length>0&&(e=o.classList).add.apply(e,this.classNames),o.classList.add("app-ui__item"),o.innerText=this.label+": ";var n=null;if("text"==this.type)(n=document.createElement("span")).innerHTML=null===this.value?'<span style="color: rgba(255, 255, 255, 0.3)">null</span>':"".concat(this.value);else if("checkbox"===this.type&&this.settingsKey&&"string"==typeof this.settingsKey){var r=JSON.parse(localStorage.getItem(this.settingsKey)||"null");if(null===r)throw new Error("Can't find '".concat(this.settingsKey,"' key in settings!"));this.value=r,(n=document.createElement("input")).setAttribute("type","checkbox"),n.checked=this.value,n.addEventListener("change",(function(e){t.value=e.target.checked,localStorage.setItem(t.settingsKey,JSON.stringify(t.value))}))}return n&&o.appendChild(n),o},t.prototype.updateValue=function(e){this.value=e,this.body.children[0].innerHTML="".concat(e)},t.prototype.replaceChild=function(e){this.body.replaceChild(e,this.body.children[0])},t.prototype.resetValue=function(){this.value=null;var e=document.createElement("span");e.innerHTML='<span style="color: rgba(255, 255, 255, 0.3)">null</span>',this.body.replaceChild(e,this.body.children[0])},t}(d);const k=function(e,t,o){var n=document.createElement("div");n.classList.add("app-ui__container"),n.style.width="".concat(t,"px"),n.style.height="".concat(o,"px");var r=document.createElement("div");r.classList.add("app-ui__container-inner"),document.querySelector(e).appendChild(n),this.root=n;var i=new T({type:"checkbox",label:"Render grid",classNames:[],value:!1,settingsKey:"renderGrid"}),s=new T({type:"text",label:"Mouse target",classNames:["app-ui__mouse-target-display"],value:null,settingsKey:null});s.body.style.width="100%",this.elements={renderGrid:i,mouseTarget:s};var l=document.createElement("h3");l.innerText="[Dev UI]",l.classList.add("app-ui__title"),r.appendChild(l),r.appendChild(this.elements.renderGrid.body),r.appendChild(this.elements.mouseTarget.body),n.appendChild(r)};var w=o(838),S="#app-root",L=new l(S,500,500),C=new k(S,350,500),E=new j({size:{width:100,height:80},position:{x:50,y:50},style:{fillColor:e("darkRed"),borderColor:e("brightRed"),borderThickness:2,margin:20}}),A=new j({size:{width:100,height:80},position:{x:350,y:350},style:{fillColor:e("darkBlue"),borderColor:e("brightBlue"),borderThickness:2,margin:20}});L.foreground.appendChild(E),L.foreground.appendChild(A),E.ports.C.connectTo(A.ports.B),L.background.fill(e("carbon")),function(e,t){var o=e.canvas,n=o.width,r=o.height;e.strokeStyle=t.gridLineColor,e.lineWidth=t.gridLineThickness,e.beginPath();for(var i=0;i<=n;i+=t.gridSize)e.moveTo(i,0),e.lineTo(i,r);for(var s=0;s<=r;s+=t.gridSize)e.moveTo(0,s),e.lineTo(n,s);e.stroke()}(L.background.context,{gridSize:20,gridLineColor:"rgba(255, 255, 255, 0.025)",gridLineThickness:1});var P=function(){requestAnimationFrame(P),L.foreground.render()},O=function(e){return(0,w.json2html)({json:JSON.stringify(e),theme:"dracula",showTypeOnHover:!0})};P(),L.foreground.children.forEach((function(e){e.addEventListener("mouseover",(function(t){e.updateOpacity(.35),L.foreground.body.style.cursor="pointer",C.elements.mouseTarget.replaceChild(O({class:"RectangleShape",id:t.target.id,x:t.target.position.x,y:t.target.position.y}))})),e.addEventListener("mouseout",(function(t){e.updateOpacity(1),L.foreground.body.style.cursor="initial",C.elements.mouseTarget.resetValue()})),e.addEventListener("drag",(function(t){e.updateOpacity(.1),e.moveTo(t.offset.x-e.size.width/2,t.offset.y-e.size.height/2,L.foreground.children),L.foreground.body.style.cursor="grab"})),e.addEventListener("dragend",(function(t){e.updateOpacity(.35),L.foreground.body.style.cursor="pointer"})),e.addEventListener("mouseup",(function(e){C.elements.mouseTarget.replaceChild(O({class:"RectangleShape",id:e.target.id,x:e.target.position.x,y:e.target.position.y}))})),Object.values(e.ports).forEach((function(e){e.addEventListener("mouseover",(function(){L.foreground.body.style.cursor="pointer",e.style.visibility=!0,C.elements.mouseTarget.replaceChild(O({class:"ConnectingPort",letter:e.letter,x:e.connectionPoint.point.x,y:e.connectionPoint.point.y,parent:e.parent.id,isBusy:e.isBusy,endPoint:!0===e.isBusy?e.endPoint.parent.id:null}))})),e.addEventListener("hoveron",(function(){e.style.visibility=!0})),e.addEventListener("hoveroff",(function(){e.style.visibility=!1})),e.addEventListener("mouseout",(function(){L.foreground.body.style.cursor="initial",C.elements.mouseTarget.resetValue()})),e.addEventListener("click",(function(){console.log("current selected port:",e)}))}))})),L.processIntersectionsWithMouse(),console.log(L,C,E)})()})();